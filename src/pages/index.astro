---
import AppLayout from "../layouts/AppLayout.astro";
import Button from "@/components/ui/Button.astro";
import { getLangFromRequest, t } from "../i18n";

const lang = getLangFromRequest(Astro.request);
const i18n = t(lang);

const hero = i18n.home.hero;
const workflow = i18n.home.workflow;
const forWho = i18n.home.forWho;
const stack = i18n.home.stack;
---

<AppLayout
  title={hero.pageTitle}
  subtitle={hero.pageSubtitle}
>
  <div class="space-y-20">
    <!-- HERO -->
    <section
      class="relative overflow-hidden rounded-3xl glass-panel px-5 py-10 md:px-10 md:py-14"
      data-animate
    >
      <!-- Halos / parallax -->
      <div
        class="pointer-events-none absolute -left-32 -top-32 h-64 w-64 rounded-full bg-blue-500/20 blur-3xl"
        data-parallax="0.18"
      ></div>
      <div
        class="pointer-events-none absolute -right-40 top-10 h-72 w-72 rounded-full bg-sky-400/16 blur-3xl"
        data-parallax="-0.12"
      ></div>

      <div
        class="relative grid items-center gap-10 md:grid-cols-[minmax(0,1.6fr)_minmax(0,1.25fr)]"
      >
        <!-- Texte -->
        <div class="space-y-6">
          <div class="flex flex-wrap items-center gap-2">
            <span class="jy-badge">{hero.badge}</span>
            <span class="text-[11px] uppercase tracking-[0.3em] text-slate-400">
            </span>
          </div>

          <h2 class="text-3xl font-semibold leading-tight md:text-4xl lg:text-5xl">
            {hero.h2Part1}{" "}
            <span class="glow-text text-blue-400">{hero.h2Highlight}</span>{" "}
            {hero.h2Part3}
          </h2>

          <p class="max-w-xl text-sm text-slate-300 md:text-base">
            {hero.lead}
          </p>

          <div class="flex flex-wrap items-center gap-3">
            <Button href="/auth/register">
              {hero.ctaPrimary}
            </Button>
            <a href="#comment-ca-marche" class="btn btn-ghost text-[11px]">
              {hero.ctaSecondary}
            </a>
          </div>

          <dl class="mt-4 grid max-w-md grid-cols-2 gap-4 text-xs text-slate-400">
            <div>
              <dt class="font-semibold text-slate-200">
                {hero.features.leftTitle}
              </dt>
              <dd>
                {hero.features.leftText}
              </dd>
            </div>
            <div>
              <dt class="font-semibold text-slate-200">
                {hero.features.rightTitle}
              </dt>
              <dd>
                {hero.features.rightText}
              </dd>
            </div>
          </dl>
        </div>

        <!-- Preview UI -->
        <div class="relative" data-animate>
          <div
            class="pointer-events-none absolute -inset-6 rounded-[2rem] bg-gradient-to-br from-blue-500/20 via-slate-950 to-slate-950 blur-2xl"
          ></div>

          <div
            class="relative overflow-hidden rounded-3xl border border-slate-800/80 bg-slate-950/95 shadow-[0_30px_80px_rgba(15,23,42,0.95)]"
          >
            <!-- Barre de fenêtre -->
            <div
              class="flex items-center justify-between border-b border-slate-800/80 bg-slate-900/80 px-4 py-3"
            >
              <div class="flex items-center gap-1.5">
                <span class="h-2 w-2 rounded-full bg-red-500/70"></span>
                <span class="h-2 w-2 rounded-full bg-amber-400/70"></span>
                <span class="h-2 w-2 rounded-full bg-emerald-500/70"></span>
              </div>
              <span class="text-[11px] text-slate-400">
                preview.jylweb.app
              </span>
              <span
                class="rounded-full border border-slate-700 px-2 py-0.5 text-[10px] text-slate-400"
              >
                Astro · Static
              </span>
            </div>

            <div class="grid gap-0 md:grid-cols-[1.4fr_1fr]">
              <!-- Aperçu contenu -->
              <div class="space-y-4 p-5 md:p-6">
                <p
                  class="text-[10px] uppercase tracking-[0.32em] text-slate-500"
                >
                  {hero.previewLabel}
                </p>
                <div class="space-y-2">
                  <p class="text-sm font-semibold text-slate-50">
                    {hero.previewBusinessName}
                  </p>
                  <p class="text-xs text-slate-400">
                    {hero.previewText}
                  </p>
                </div>
                <div class="mt-4 flex flex-wrap items-center gap-2">
                  <span
                    class="inline-flex items-center rounded-full bg-blue-600/20 px-3 py-1 text-[11px] text-blue-200"
                  >
                    {hero.previewPillPrimary}
                  </span>
                  <span
                    class="inline-flex items-center rounded-full border border-slate-700 px-3 py-1 text-[11px] text-slate-300"
                  >
                    {hero.previewPillSecondary}
                  </span>
                </div>
              </div>

              <!-- Pseudo code -->
              <div
                class="border-t border-slate-800/80 bg-gradient-to-b from-slate-950 to-slate-900 p-5 text-[11px] text-slate-300 md:border-l md:border-t-0 md:p-6"
              >
                <p
                  class="mb-3 text-[10px] uppercase tracking-[0.32em] text-slate-500"
                >
                  {hero.previewCodeLabel}
                </p>
                <pre class="overflow-x-auto leading-relaxed">
<code>{`---
// ---------------
const { title, tagline, cta } = Astro.props;
---
<section class="hero">
  <h1>{title}</h1>
  <p>{tagline}</p>
  <button>{cta}</button>
</section>`}</code>
                </pre>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- SECTION : Comment ça marche -->
    <section id="comment-ca-marche" class="space-y-6" data-animate>
      <header class="max-w-2xl space-y-2">
        <p class="text-[11px] uppercase tracking-[0.3em] text-slate-400">
          {workflow.kicker}
        </p>
        <h2 class="text-xl font-semibold text-slate-50 md:text-2xl">
          {workflow.title}
        </h2>
        <p class="text-sm text-slate-300">
          {workflow.body}
        </p>
      </header>

      <ol class="grid gap-4 text-sm md:grid-cols-3">
        <li class="card p-5">
          <div class="text-xs font-semibold text-blue-300">
            {workflow.step1Title}
          </div>
          <p class="mt-2 text-slate-300">
            {workflow.step1Body}
          </p>
        </li>
        <li class="card p-5">
          <div class="text-xs font-semibold text-blue-300">
            {workflow.step2Title}
          </div>
          <p class="mt-2 text-slate-300">
            {workflow.step2Body}
          </p>
        </li>
        <li class="card p-5">
          <div class="text-xs font-semibold text-blue-300">
            {workflow.step3Title}
          </div>
          <p class="mt-2 text-slate-300">
            {workflow.step3Body}
          </p>
        </li>
      </ol>
    </section>

    <!-- SECTION : Pour qui ? -->
    <section id="pour-qui" class="space-y-6" data-animate>
      <header class="max-w-2xl space-y-2">
        <p class="text-[11px] uppercase tracking-[0.3em] text-slate-400">
          {forWho.kicker}
        </p>
        <h2 class="text-xl font-semibold text-slate-50 md:text-2xl">
          {forWho.title}
        </h2>
      </header>

      <div class="grid gap-4 md:grid-cols-3 text-sm">
        <div class="card p-5">
          <h3 class="text-sm font-semibold text-slate-100">
            {forWho.f1Title}
          </h3>
          <p class="mt-2 text-slate-300">
            {forWho.f1Body}
          </p>
        </div>
        <div class="card p-5">
          <h3 class="text-sm font-semibold text-slate-100">
            {forWho.f2Title}
          </h3>
          <p class="mt-2 text-slate-300">
            {forWho.f2Body}
          </p>
        </div>
        <div class="card p-5">
          <h3 class="text-sm font-semibold text-slate-100">
            {forWho.f3Title}
          </h3>
          <p class="mt-2 text-slate-300">
            {forWho.f3Body}
          </p>
        </div>
      </div>
    </section>

    <!-- SECTION : Stack -->
    <section id="stack" class="space-y-6" data-animate>
      <header class="max-w-2xl space-y-2">
        <p class="text-[11px] uppercase tracking-[0.3em] text-slate-400">
          {stack.kicker}
        </p>
        <h2 class="text-xl font-semibold text-slate-50 md:text-2xl">
          {stack.title}
        </h2>
      </header>

      <div class="grid gap-4 text-sm md:grid-cols-3">
        <div class="card p-5">
          <h3 class="text-sm font-semibold text-slate-100">
            {stack.s1Title}
          </h3>
          <p class="mt-2 text-slate-300">
            {stack.s1Body}
          </p>
        </div>
        <div class="card p-5">
          <h3 class="text-sm font-semibold text-slate-100">
            {stack.s2Title}
          </h3>
          <p class="mt-2 text-slate-300">
            {stack.s2Body}
          </p>
        </div>
        <div class="card p-5">
          <h3 class="text-sm font-semibold text-slate-100">
            {stack.s3Title}
          </h3>
          <p class="mt-2 text-slate-300">
            {stack.s3Body}
          </p>
        </div>
      </div>
    </section>
  </div>
</AppLayout>
